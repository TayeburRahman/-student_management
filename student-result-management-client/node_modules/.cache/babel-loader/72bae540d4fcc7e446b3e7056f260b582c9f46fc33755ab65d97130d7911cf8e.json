{"ast":null,"code":"import { apiSlice } from \"../apiSlice\";\nimport { userLoggedIn } from \"./authSlice\";\nexport const authApi = apiSlice.injectEndpoints({\n  endpoints: builder => ({\n    loginUser: builder.mutation({\n      query: data => ({\n        url: \"/api/v1/admin/login\",\n        method: \"POST\",\n        body: data\n      }),\n      async onQueryStarted(query, _ref) {\n        let {\n          queryFulfilled,\n          dispatch\n        } = _ref;\n        try {\n          const result = await queryFulfilled;\n          localStorage.setItem(\"auth\", JSON.stringify({\n            token: result.data.token,\n            user: result.data.user\n          }));\n          dispatch(userLoggedIn({\n            token: result.data.token,\n            user: result.data.user\n          }));\n\n          //   dispatch(\n          //     addMessage({\n          //       message: \"Registration successful\",\n          //       type: \"success\",\n          //     })\n          //   );\n        } catch (error) {\n          console.log(\"redux store error\", error);\n        }\n      }\n    }),\n    registration: builder.mutation({\n      query: data => ({\n        url: \"/api/v1/admin/signup\",\n        method: \"POST\",\n        body: data\n      })\n    })\n  })\n});\nexport const {\n  useLoginUserMutation,\n  useRegistrationMutation\n} = authApi;","map":{"version":3,"names":["apiSlice","userLoggedIn","authApi","injectEndpoints","endpoints","builder","loginUser","mutation","query","data","url","method","body","onQueryStarted","queryFulfilled","dispatch","result","localStorage","setItem","JSON","stringify","token","user","error","console","log","registration","useLoginUserMutation","useRegistrationMutation"],"sources":["/media/tayebur/D40421030420E9E6/project/node&React/student-result-management/student-result-management-client/src/features/auth/authApi.js"],"sourcesContent":["import { apiSlice } from \"../apiSlice\";\nimport { userLoggedIn } from \"./authSlice\";\n\nexport const authApi = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    loginUser: builder.mutation({\n      query: (data) => ({\n        url: \"/api/v1/admin/login\",\n        method: \"POST\",\n        body: data,\n      }),\n      async onQueryStarted (query, { queryFulfilled, dispatch }) {\n        try {\n          const result  = await queryFulfilled;\n\n          localStorage.setItem(\"auth\", JSON.stringify({\n            token: result.data.token,\n            user: result.data.user\n          }))\n\n          dispatch(userLoggedIn({\n            token: result.data.token,\n            user: result.data.user\n          }));\n\n        //   dispatch(\n        //     addMessage({\n        //       message: \"Registration successful\",\n        //       type: \"success\",\n        //     })\n        //   );\n        \n        } catch (error) { \n            console.log(\"redux store error\",error);\n        }\n      },\n    }),\n\n    registration: builder.mutation({\n      query: (data) => ({\n        url: \"/api/v1/admin/signup\",\n        method: \"POST\",\n        body: data,\n      }),\n    }),\n  }),\n});\n\nexport const { useLoginUserMutation, useRegistrationMutation } = authApi;   "],"mappings":"AAAA,SAASA,QAAQ,QAAQ,aAAa;AACtC,SAASC,YAAY,QAAQ,aAAa;AAE1C,OAAO,MAAMC,OAAO,GAAGF,QAAQ,CAACG,eAAe,CAAC;EAC9CC,SAAS,EAAGC,OAAO,KAAM;IACvBC,SAAS,EAAED,OAAO,CAACE,QAAQ,CAAC;MAC1BC,KAAK,EAAGC,IAAI,KAAM;QAChBC,GAAG,EAAE,qBAAqB;QAC1BC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEH;MACR,CAAC,CAAC;MACF,MAAMI,cAAc,CAAEL,KAAK,QAAgC;QAAA,IAA9B;UAAEM,cAAc;UAAEC;QAAS,CAAC;QACvD,IAAI;UACF,MAAMC,MAAM,GAAI,MAAMF,cAAc;UAEpCG,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC;YAC1CC,KAAK,EAAEL,MAAM,CAACP,IAAI,CAACY,KAAK;YACxBC,IAAI,EAAEN,MAAM,CAACP,IAAI,CAACa;UACpB,CAAC,CAAC,CAAC;UAEHP,QAAQ,CAACd,YAAY,CAAC;YACpBoB,KAAK,EAAEL,MAAM,CAACP,IAAI,CAACY,KAAK;YACxBC,IAAI,EAAEN,MAAM,CAACP,IAAI,CAACa;UACpB,CAAC,CAAC,CAAC;;UAEL;UACA;UACA;UACA;UACA;UACA;QAEA,CAAC,CAAC,OAAOC,KAAK,EAAE;UACZC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAACF,KAAK,CAAC;QAC1C;MACF;IACF,CAAC,CAAC;IAEFG,YAAY,EAAErB,OAAO,CAACE,QAAQ,CAAC;MAC7BC,KAAK,EAAGC,IAAI,KAAM;QAChBC,GAAG,EAAE,sBAAsB;QAC3BC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEH;MACR,CAAC;IACH,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEkB,oBAAoB;EAAEC;AAAwB,CAAC,GAAG1B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}